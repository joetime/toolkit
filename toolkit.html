<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Utility Toolkit</title>
    <style>
        /* Reset some default styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #e0e0e0;
            margin: 0;
            padding: 0;
        }

        /* Container for the entire application */
        .container {
            max-width: 900px;
            margin: 40px auto;
            background: #1e1e1e;
            padding: 20px 30px 30px 30px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }

        h1 {
            text-align: center;
            color: #ffffff;
            margin-bottom: 20px;
        }

        /* Tab styles */
        .tabs {
            overflow: hidden;
            background-color: #1e1e1e;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: center;
        }

        .tabs button {
            background-color: #1e1e1e;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 20px;
            transition: background-color 0.3s;
            color: #e0e0e0;
            font-size: 16px;
        }

        .tabs button:hover {
            background-color: #333;
        }

        .tabs button.active {
            background-color: #333;
            border-bottom: 3px solid #4285F4;
        }

        /* Tab content styles */
        .tab-content {
            display: none;
            padding: 20px 0;
        }

        .tab-content.active {
            display: block;
        }

        label {
            font-weight: bold;
            display: block;
            margin-top: 20px;
            color: #ffffff;
        }

        textarea {
            width: 100%;
            height: 200px;
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
            border: 1px solid #333;
            resize: vertical;
            font-family: monospace;
            font-size: 14px;
            background-color: #2c2c2c;
            color: #e0e0e0;
        }

        .buttons {
            text-align: right;
            margin-top: 15px;
        }

        /* Notification Styles */
        #notification {
            visibility: hidden;
            min-width: 250px;
            background-color: #4CAF50;
            color: white;
            text-align: center;
            border-radius: 4px;
            padding: 16px;
            position: fixed;
            top: 30px;
            right: 30px;
            z-index: 1;
            opacity: 0;
            transition: opacity 0.5s, visibility 0.5s;
        }

        #notification.show {
            visibility: visible;
            opacity: 1;
        }

        /* Scrollbar styling for better dark mode aesthetics */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #1e1e1e;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #555;
            border-radius: 10px;
            border: 2px solid #1e1e1e;
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            .tabs {
                flex-direction: column;
            }

            .tabs button {
                width: 100%;
                text-align: left;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Utility Toolkit</h1>

    <!-- Tab Navigation -->
    <div class="tabs">
        <button class="tab-link active" onclick="openTab(event, 'GUIDFormatter')">GUID to SQL Array</button>
        <!-- Future tabs can be added here -->
        <!-- <button class="tab-link" onclick="openTab(event, 'AnotherUtility')">Another Utility</button> -->
    </div>

    <!-- Tab Content -->
    <div id="GUIDFormatter" class="tab-content active">
        <label for="inputGUIDs">Paste your GUIDs below (one per line):</label>
        <textarea id="inputGUIDs" placeholder="Enter GUIDs here..."></textarea>

        <label for="outputSQL">Formatted SQL Array:</label>
        <textarea id="outputSQL" readonly placeholder="Formatted SQL array will appear here..."></textarea>
    </div>

    <!-- Future tab contents can be added here -->
    <!--
    <div id="AnotherUtility" class="tab-content">
        <h2>Another Utility</h2>
        <!-- Content for another utility -->
    </div>
    -->

</div>

<!-- Notification Element -->
<div id="notification">Formatted SQL array copied to clipboard!</div>

<script>
    // Tab functionality
    function openTab(evt, tabName) {
        // Declare all variables
        const tabLinks = document.getElementsByClassName('tab-link');
        const tabContents = document.getElementsByClassName('tab-content');

        // Remove 'active' class from all tabs and contents
        for (let i = 0; i < tabLinks.length; i++) {
            tabLinks[i].classList.remove('active');
        }
        for (let i = 0; i < tabContents.length; i++) {
            tabContents[i].classList.remove('active');
        }

        // Add 'active' class to the clicked tab and corresponding content
        document.getElementById(tabName).classList.add('active');
        evt.currentTarget.classList.add('active');
    }

    // GUID Formatter functionality
    const inputGUIDs = document.getElementById('inputGUIDs');
    const outputSQL = document.getElementById('outputSQL');
    const notification = document.getElementById('notification');

    inputGUIDs.addEventListener('input', handleInput);

    function handleInput() {
        const input = inputGUIDs.value;
        const lines = input.split(/\r?\n/).map(line => line.trim()).filter(line => line !== '');
        if (lines.length === 0) {
            outputSQL.value = '';
            return;
        }
        const formatted = "(\n" + lines.map(guid => `    '${guid}'`).join(",\n") + "\n)";
        outputSQL.value = formatted;
        copyToClipboard(formatted);
    }

    function copyToClipboard(text) {
        // Use the Clipboard API if available
        if (navigator.clipboard && window.isSecureContext) {
            navigator.clipboard.writeText(text).then(() => {
                showTemporaryNotification();
            }, () => {
                fallbackCopyText(text);
            });
        } else {
            // Fallback method
            fallbackCopyText(text);
        }
    }

    function fallbackCopyText(text) {
        // Create a temporary textarea to select and copy
        const tempTextArea = document.createElement('textarea');
        tempTextArea.value = text;
        // Avoid scrolling to bottom
        tempTextArea.style.top = '0';
        tempTextArea.style.left = '0';
        tempTextArea.style.position = 'fixed';
        document.body.appendChild(tempTextArea);
        tempTextArea.focus();
        tempTextArea.select();
        try {
            const successful = document.execCommand('copy');
            if (successful) {
                showTemporaryNotification();
            } else {
                showTemporaryAlert('Failed to copy. Please copy manually.', 'error');
            }
        } catch (err) {
            showTemporaryAlert('Error copying to clipboard.', 'error');
        }
        document.body.removeChild(tempTextArea);
    }

    function showTemporaryNotification() {
        notification.className = 'show';
        setTimeout(() => {
            notification.className = notification.className.replace('show', '');
        }, 5000); // 5 seconds
    }

    // Optional: For displaying error messages in the same notification style
    function showTemporaryAlert(message, type) {
        notification.textContent = message;
        if (type === 'error') {
            notification.style.backgroundColor = '#f44336'; // Red color for errors
        } else {
            notification.style.backgroundColor = '#4CAF50'; // Green color for success
        }
        notification.className = 'show';
        setTimeout(() => {
            notification.className = notification.className.replace('show', '');
            // Reset to default success color after hiding
            notification.style.backgroundColor = '#4CAF50';
            notification.textContent = 'Formatted SQL array copied to clipboard!';
        }, 5000); // 5 seconds
    }
</script>

</body>
</html>
